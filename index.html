<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">

<title></title>

<meta name="description" content="">    


<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

<link rel="stylesheet" href="css/reveal.css">
  <link rel="stylesheet" href="css/theme/stata.css" id="theme">


<!-- For syntax highlighting -->
  <link rel="stylesheet" href="lib/css/zenburn.css">


<!-- If the query includes 'print-pdf', use the PDF print sheet -->
<script>
  document.write( '<link rel="stylesheet" href="css/print/' +
    ( window.location.search.match( /print-pdf/gi ) ? 'pdf' : 'paper' ) + 
    '.css" type="text/css" media="print">' );
</script>

<!--[if lt IE 9]>
<script src="lib/js/html5shiv.js"></script>
<![endif]-->
</head>

<body>

<div class="reveal">

<!-- Any section element inside of this container is displayed as a slide -->
<div class="slides">

<!--
<section>
<h1></h1>

<p>
<h4></h4>
</p>
</section>  
-->


<section id="incorporating-stata-into-reproducible-documents" class="slide level1">
<h1>Incorporating Stata into reproducible documents</h1>
<section id="hua-pengstatacorphpeng" class="level2">
<h2><a href="hpeng@stata.com">Hua Peng@StataCorp</a></h2>
<section id="oceania-stata-users-group-meeting" class="level3">
<h3>2017 Oceania Stata Users Group meeting</h3>
</section>
</section>
</section>
<section id="why-reproducible-documents" class="slide level1">
<h1>Why reproducible documents?</h1>
<p>Eliminate manual steps such as hand-editing documents</p>
<ul>
<li>mix formatted text and Stata output</li>
<li>include inline Stata results</li>
<li>embed Stata graphs</li>
<li>produce tables containing the output from selected Stata commands</li>
</ul>
</section>
<section id="commands-in-stata-15" class="slide level1">
<h1>Commands in Stata 15</h1>
<ul>
<li>dyndoc - convert dynamic Markdown documents to web pages</li>
<li>putdocx - create Word documents</li>
<li>putpdf - create PDF files</li>
</ul>
</section>
<section id="a-dyndoc-example" class="slide level1">
<h1>A dyndoc example</h1>
<p>Produce <a href="./example.html">a blog article</a> from a <a href="./example.md">dynamic markdown document</a></p>
</section>
<section id="quick-review-of-dynamic-tags" class="slide level1">
<h1>Quick review of dynamic tags</h1>
<section id="dd_do-for-a-block-of-stata-code" class="level2">
<h2>dd_do for a block of Stata code</h2>
<pre><code>&lt;&lt;dd_do&gt;&gt;
sysuse auto
regress weight displacement
&lt;&lt;/dd_do&gt;&gt;</code></pre>
</section>
<section id="section" class="level2">
<h2></h2>
<pre><code>. sysuse auto
(1978 Automobile Data)

. regress weight displacement

      Source |       SS           df       MS      Number of obs   =        74
-------------+----------------------------------   F(1, 72)        =    289.52
       Model |  35312313.3         1  35312313.3   Prob &gt; F        =    0.0000
    Residual |  8781865.08        72  121970.348   R-squared       =    0.8008
-------------+----------------------------------   Adj R-squared   =    0.7981
       Total |  44094178.4        73  604029.841   Root MSE        =    349.24

------------------------------------------------------------------------------
      weight |      Coef.   Std. Err.      t    P&gt;|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
displacement |   7.573261   .4450891    17.02   0.000     6.685992     8.46053
       _cons |   1525.276   96.74555    15.77   0.000     1332.417    1718.134
------------------------------------------------------------------------------
</code></pre>
</section>
<section id="section-1" class="level2">
<h2></h2>
<p>Attributes change a tag's behavior</p>
<pre><code>&lt;&lt;dd_do:quietly&gt;&gt;
matrix define eb = e(b)
&lt;&lt;/dd_do&gt;&gt;</code></pre>
</section>
<section id="dd_display-for-inline-stata-results" class="level2">
<h2>dd_display for inline Stata results</h2>
<ul>
<li>For every unit increase in displacement, a &lt;&lt;dd_display:%9.4f eb[1,1]&gt;&gt; unit increase in weight is predicted.</li>
</ul>
<ul>
<li class="fragment">For every unit increase in displacement, a 7.5733 unit increase in weight is predicted.</li>
</ul>
</section>
<section id="dd_graph" class="level2">
<h2>dd_graph</h2>
<pre><code>&lt;&lt;dd_do:quietly&gt;&gt;
scatter weight displacement, mcolor(%30)
&lt;&lt;/dd_do&gt;&gt;</code></pre>
<pre><code>&lt;&lt;dd_graph&gt;&gt;</code></pre>
</section>
<section id="section-2" class="level2">
<h2></h2>
<section id="section-3" class="level4">
<h4><img src="Graph.svg" ></h4>
</section>
</section>
</section>
<section id="more-dynamic-tags" class="slide level1">
<h1>More dynamic tags</h1>
<section id="display-contents-based-on-condition" class="level2">
<h2>Display contents based on condition</h2>
<pre><code>&lt;&lt;dd_skip_if: (&quot;`talkplace&#39;&quot; == &quot;Oceania&quot;)&gt;&gt;
&gt; The past was alterable. The past never had been altered.
&lt;&lt;dd_skip_else&gt;&gt;
&gt; Oceania was at war with Eastasia. Oceania had always been at war with Eastasia.
&lt;&lt;dd_skip_end&gt;&gt;</code></pre>
</section>
<section id="section-4" class="level2">
<h2></h2>
<blockquote>
<p>Oceania was at war with Eastasia. Oceania had always been at war with Eastasia.</p>
</blockquote>
</section>
<section id="include-a-text-file" class="level2">
<h2>Include a text file</h2>
<p>The <a href="subsection1.txt">text file</a> might be the result of a <a href="subsection1.md">dynamic file</a>.</p>
<pre><code>&lt;&lt;dd_include: subsection1.txt &gt;&gt;</code></pre>
</section>
<section id="section-5" class="level2">
<h2></h2>
<p>Make a dataset containing means and variances of 100-observation samples from a lognormal distribution. Perform the experiment 10,000 times, then summarize the result:</p>
<pre><code>
    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
        mean |     10,000    1.648681    .2178435   1.038739   3.246317
         var |     10,000    4.714419    4.978809   .8448562   206.9827
</code></pre>
</section>
</section>
<section id="do-files-on-steroids" class="slide level1">
<h1>&quot;.do files on steroids&quot;</h1>
<ul>
<li>macros work the same as in do-file</li>
<li>accept arguments</li>
</ul>
</section>
<section id="use-arguments-in-dyndoc" class="slide level1">
<h1>Use arguments in <strong>dyndoc</strong></h1>
<p>Produce a set of different HTML pages from one <a href="./auto_78.txt">dynamic document</a> with different arguments</p>
<ul>
<li><a href="./cars/AMC%20Concord.html">AMC Concord</a></li>
<li><a href="./cars/BMW%20320i.html">BMW 320i</a></li>
<li><a href="./cars/Buick%20Riviera.html">Buick Riviera</a></li>
<li><a href="./cars/Ford%20Mustang.html">Ford Mustang</a></li>
<li><a href="./cars/Honda%20Accord.html">Honda Accord</a></li>
<li><a href="./cars/Toyota%20Celica.html">Toyota Celica</a></li>
</ul>
</section>
<section id="code-for-the-previous-page" class="slide level1">
<h1>Code for the previous page</h1>
<pre><code>&lt;&lt;dd_do:quietly&gt;&gt;
use auto_78_img.dta, clear
desc
cap mkdir cars
&lt;&lt;/dd_do&gt;&gt;

&lt;&lt;dd_do:nocommand&gt;&gt;
forval i=1/`r(N)&#39; {
  di &quot;- [&quot; make[`i&#39;] &quot;](./cars/&quot; make[`i&#39;] &quot;.html)&quot;
}
&lt;&lt;/dd_do&gt;&gt;

// need use dd_remove
&lt;&lt;dd_do&gt;&gt;
forval i=1/`r(N)&#39; {
  dyndoc auto_78.txt `=make[`i&#39;]&#39;, saving(&quot;cars/`=make[`i&#39;]&#39;.html&quot;) replace
}
&lt;&lt;/dd_do&gt;&gt;
// need use dd_remove
</code></pre>
</section>
<section id="dyntext" class="slide level1">
<h1>dyntext</h1>
<p>Process dynamic tags in any text files, for example, LaTeX and JavaScript</p>
</section>
<section id="javascript" class="slide level1">
<h1>JavaScript</h1>
<ul>
<li>An <a href="./gchart.html">example</a> is using Google Chart library and the <a href="./gchart.txt">dynamic document</a></li>
</ul>
<pre><code>dyntext gchart.txt, sav(gchart.html) replace</code></pre>
</section>
<section id="use-pandoc-instead-of-statas-markdown" class="slide level1">
<h1>Use pandoc instead of Stata's markdown</h1>
<ul>
<li>Produce reveal.js <a href="./aus17.md">slildes deck</a> with <a href="./maker.do"><strong>dynpandoc</strong></a></li>
<li>Produce <a href="./auto.docx">.docx document</a> with <a href="./makeauto.do"><strong>dynpandoc</strong></a></li>
</ul>
</section>
<section id="putdocx" class="slide level1">
<h1>putdocx</h1>
<p>Produce a <a href="./exdocx.docx">.docx document</a> from a <a href="./exdocx.do">do-file</a></p>
<ul>
<li>full range of control for text formatting</li>
<li>flexible table output</li>
</ul>
</section>
<section id="output-tables-in-markdown" class="slide level1">
<h1>Output tables in markdown</h1>
<p>Produce <a href="./table.html">markdown tables</a> from <a href="./table.md">commands</a>, including</p>
<ul>
<li>all estimation commands using <strong>_coef_table</strong></li>
<li><strong>table</strong></li>
<li><strong>estimates table</strong></li>
</ul>
</section>
<section id="the-end" class="slide level1">
<h1>THE END</h1>
</section>
</div>
</div>
<script src="lib/js/head.min.js"></script>
<script src="js/reveal.js"></script>

<script>
  // Full list of configuration options available here:
  // https://github.com/hakimel/reveal.js#configuration
  Reveal.initialize({
    controls: true,
    progress: true,
    history: true,
    center: false,

  // available themes are in /css/theme
      theme: Reveal.getQueryHash().theme || 'stata', 
  
  // default/cube/page/concave/zoom/linear/fade/none
      transition: Reveal.getQueryHash().transition || 'default',
  
  // Optional libraries used to extend on reveal.js
  dependencies: [
    { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
    { src: 'plugin/markdown/showdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
    { src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
    { src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
    { src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
    { src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
    // { src: 'plugin/remotes/remotes.js', async: true, condition: function() { return !!document.body.classList; } }
  ]
  });

</script>

</body>
</html>
